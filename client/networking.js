var exampleUser1 =
    {
        "public": `-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1HpsefBEs1q90bfHbCz/
fakKkMkhDtklptF8N58QAsTJS+QOAbMRjAdvz/wLzkDBenPVk/wxvz9ouNGG7HDl
P8T2I/diQantI7r4ZA6CwWutCrfeDHPtVFLOPSvIgpxAma0BQ5kgol1ebW1msZ3i
1D3PNaYxOSGFyOSCkPY+yYSzscAsBIUXYKDQVEOO7Gl+kw3ecdvcaT68q767n94N
GdoSabmnvGixP72tO2fvy8oFUp/6fOzu62dteV2JYUuQD4cKHgzhmzNfRjpLcBkJ
BbazqN/yaaQjhPrdM7E7DLD/Q0khv2yUkhYd7iMvkUZMsNryG6/koy6wXPn2qkvU
bQIDAQAB
-----END PUBLIC KEY-----`,
        "private": `-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDUemx58ESzWr3R
t8dsLP99qQqQySEO2SWm0Xw3nxACxMlL5A4BsxGMB2/P/AvOQMF6c9WT/DG/P2i4
0YbscOU/xPYj92JBqe0juvhkDoLBa60Kt94Mc+1UUs49K8iCnECZrQFDmSCiXV5t
bWaxneLUPc81pjE5IYXI5IKQ9j7JhLOxwCwEhRdgoNBUQ47saX6TDd5x29xpPryr
vruf3g0Z2hJpuae8aLE/va07Z+/LygVSn/p87O7rZ215XYlhS5APhwoeDOGbM19G
OktwGQkFtrOo3/JppCOE+t0zsTsMsP9DSSG/bJSSFh3uIy+RRkyw2vIbr+SjLrBc
+faqS9RtAgMBAAECggEADr06ps900eToCP27eYoPjmXPrqZ9GBIWdgwka+6pRiqP
dNJqPvzvKSxfjxPCtTkxvVmpWv13bUxWlTItBAbQKEx0mfRwXkdi2gPUyjVlevRf
XxXNHfEGvr7ga/GMabRcGNedoFT6z2M0Xdk6cp9rW4y5bH/Np1MSJug5vxjjLHMF
4KSBcORbg7VBhVHTKkn75+C5Yu7urlh2ZGTAzAA+jMDEZ0C54HmS12rPt+heLyhZ
yJefYZ4iyrY/vHreINzbpBXE1z4Rh9LcaMEJLn/LM5vzlIzkHx/kmIpiErY5ejeu
DmP6bdckZTHwIORfcQU1HNy63bdTKv+oAjajzmw5MwKBgQD4eekP/9ZPfef6CsIP
sMqdsoXYeSk9o6jrOfPGlb2KoB0jZuXXKVxzp4P75pdewcXT/PivanO4RIrEoiny
5guIepQU9wHQrYZG3lMH7t9RscAgptzxBKT/6bYCnAMcuBYX6qLigMYhqhI5cYrY
LHJ13kllXfztdafsXuQgHHAFEwKBgQDa6XiYhy+UQQTE6S9UmVLKgrNBY8FnowyL
17U12UsiZkFZlpSlI0Xd3bufg+ee7YL2PT0N55nXbcT+NHJszFbHdLwYj+2LL6HN
HIF8H6rv7RopYJtTrtt46Y1UUCq+RFKCeGD5xr2sXyQ5nrg2p6kVA6l4GyMAzr7v
gnbq3ptwfwKBgBwJjY3bnXAc0ec5/YnNth8zPL0fdtLYu7/HK0W2McwJoyAShU7R
APif51muPFhZ3xu7iMgqZ+JcAZiMf9VDtftxcXIoKRFF80fd4Fqdzp8mQnqsuXOM
xZ2G3p3Owt8juoJ6XGTYiQLVcPcAY91ero+0RG3mvBqDUy5tyqoA63b3AoGAOxwP
lB/smPt1bjYIsa80y7m+7UkiT/mWyavVIlUqFH/H5YjjWjPMCbx1jPzw7dj0I8kl
UzvWLnVVW86NlxMV24WJxJgYbBzQc7HexMVIQsCi78lGJ7JvUJa/sqRy5i1Mmi4n
AUrIrGKERYq18wwSe7ohaGzrZqxsof94XLL/BcECgYEA5RZ0KVSOLLRXIvKaw4u/
Q1qBsWf4SAw2M7IgjcN/jv4BvHjLN1gNcIhAzVtulP0IIZdEmudnwZ8hqyztbGZo
Rz7OuvlbJXaMRpakMkJXlLN3uxxGdwTPaLc9I5l9FgwqlV0fLb0ISbmbH/j77qjD
xam1r8D3vg0i8NN6VTMYHGQ=
-----END PRIVATE KEY-----`
    }

var exampleUser2 = {
    "public": `-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwBtGmytY5JcbIDB7fAsH
Scojt8s2v8Z3PefAfeq/IFycY1TYRtLtltmAa09qUfq0HOWbdc82ApqUh5EZQTqL
LoX/jmEWWRDF2bTE28UOgglEulV0jPiiozmrNu5XmOEyKYjUb2NmVCYRbVa8l+og
FqVLOS3Tl9gfJ1DKcqZJMUD8hsnLW8gBYzqGiQiHDv0RgGK9LfmXFNp3ldIb0b76
ZJ9AFIPoxTF3wgbPAvVGUt09skrxbUCeiRmHHQBHOYUAYFy5X0eRxoCesjO4+FAa
G/f6u2co+BmovrmZCdoTe+dyd1aNdfzDvc4EfvKckEoajX/o5xiO+oa0xwI9S2rL
uQIDAQAB
-----END PUBLIC KEY-----`,
"private": `-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDAG0abK1jklxsg
MHt8CwdJyiO3yza/xnc958B96r8gXJxjVNhG0u2W2YBrT2pR+rQc5Zt1zzYCmpSH
kRlBOosuhf+OYRZZEMXZtMTbxQ6CCUS6VXSM+KKjOas27leY4TIpiNRvY2ZUJhFt
VryX6iAWpUs5LdOX2B8nUMpypkkxQPyGyctbyAFjOoaJCIcO/RGAYr0t+ZcU2neV
0hvRvvpkn0AUg+jFMXfCBs8C9UZS3T2ySvFtQJ6JGYcdAEc5hQBgXLlfR5HGgJ6y
M7j4UBob9/q7Zyj4Gai+uZkJ2hN753J3Vo11/MO9zgR+8pyQShqNf+jnGI76hrTH
Aj1Lasu5AgMBAAECggEAGkZAwG1L0av3Gk53PS529zkt7G/fU5ht66ocUjx+mosA
GrfagslLlJO39DVe6cp7wu4GdrT6Ap4ozWfjh9/ddGYAX3VY7KKWJOIMALDxfIiO
/Vs9vyAsgl2bVL6BfZfjV/nucDOspbq1LHqt/asYa3B9GttxMrXtAOAUaFzk6tbn
aVlxq5uj30mbkt9rEkWVr3N235HApOe/WdIws/MAxx8w2F910a5eeb6/prmWlefj
z+N+NIQrfyFOmlbT+cyV8qdK+dvNc5xC4NGNbX8eh0reew0lo6BTcjCQm029XLiU
g8QG7epkyaWJkZwaLR6QqPWnoXG6/bvG8qkZ68+yFwKBgQDefTaqu3SkHxCLQkUY
SYxK2d8FAmPYILYtv7bbeum45gYUN3TqnViokJ5h2qEu9kjkL+7FH31oeq1QMmNQ
LtgPT/mEV+0J1nVCK+/OidVFt95d1k1nTQZmBSG84YpTu35ojIjdCQwH9FK4IbRj
NVhszP2jO2jD53w77n2VvJSLRwKBgQDdCpBtjUgGxgcy+DG/k72/RD+mqW6kC58T
dKSya1GzY6q4+l3xMxR7R5fEnB6IKR1VMEw0h2LvIfMDKTvHmXX8ETHSnrcSW4Ze
739iruVqdqcisBMnVcRGb/bqFZg68oys26MDuSTr8EHX2TCUDmyYGkPLQiy7ZVRl
J74zfdNw/wKBgQCLWxBXpixr9A0vvKV8jeyyoX6AK7wQDoUtaIyHMpicOG+MUCQK
I935TwP1NLSKrrZ/Psqma4/oVhaiSb1M5tpr1OLrkwskg1BUzyJYUprkHUPJsMYw
st0UH5i/LuGuipylrYi4Mcd4X/9D19Cd5zbohwlDKZ34PtDg1QOSO1krVwKBgQDC
b9WGGJ5AHxgcFMkmHV7vDaj0ANyrfvGKmrN5ov+2TjjSCKJ0VptwqhRtxWryGUCN
PDP8jQ9RDUsH/9BvDqYDeliaTjT59/qmLgSfGPwDf6Yb1Ei09DP4RessFJzZVZy7
PWUTFFzPEoPIzGt4AYwy6/+wn2Bb45GufZxJDSjenwKBgE/JdzMlDPcTORPQvtnm
ZdenPMzE3iu38fFBAqFIvGxyuW+HvfUKYo5AT1HiGjL9MCPZe8/zcDGH6wtawodz
G1JnRKpqosntdXHQeOQgyQrQeCOeorsshDbA/KK54UmDgpxKp4XJpZ6q0EB36z5g
SP4JF7d/2jLaRVlq7kb+9vTe
-----END PRIVATE KEY-----`
}

var selfKeys = {
    "public": `-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0caQc+lI9UwQ9fEJ2iy1
Fym4eKVT/AFa9aZyu4Jp/A/6YEiNe7l65tjvmUe5abPCevYMlMGK8N66WuAGtm33
69IcUwABfXkasu0f6zNGyhiLVeJaBEKGNwqtQFQt9Tiv61CPJ2G5IsKVHxlEk+Qy
A8lV8utf8nR6cj0s1g9HvSk8xUHIzbY/7mveIcmQ5t3L7IYsCMJdqZnnKx+3C2Gx
KXl2GhZ6T8atgZAiLuN3EPpZ4icYimQyhko6CSang1Squu2ir/+tBOieD6b8vPWU
FGm8W0Ru+KNUZmbCM6K6eD8zHblGXRBGbUzh/Ywd+E8gR4MGQ3Cd+FG1YCCZ0Jlp
FQIDAQAB
-----END PUBLIC KEY-----`,
    "private": `-----BEGIN PRIVATE KEY-----
MIIEuwIBADANBgkqhkiG9w0BAQEFAASCBKUwggShAgEAAoIBAQDRxpBz6Uj1TBD1
8QnaLLUXKbh4pVP8AVr1pnK7gmn8D/pgSI17uXrm2O+ZR7lps8J69gyUwYrw3rpa
4Aa2bffr0hxTAAF9eRqy7R/rM0bKGItV4loEQoY3Cq1AVC31OK/rUI8nYbkiwpUf
GUST5DIDyVXy61/ydHpyPSzWD0e9KTzFQcjNtj/ua94hyZDm3cvshiwIwl2pmecr
H7cLYbEpeXYaFnpPxq2BkCIu43cQ+lniJxiKZDKGSjoJJqeDVKq67aKv/60E6J4P
pvy89ZQUabxbRG74o1RmZsIzorp4PzMduUZdEEZtTOH9jB34TyBHgwZDcJ34UbVg
IJnQmWkVAgMBAAECggEAIs3MMSL7ExGV/cwKO6uvtuJZ5BBgBP9PkVKWlgQe4+5d
tsRKzwR4vtyusfJrsX0czuxMLZEH5Ys6hXHGQ1Wu7K39O4sUdDYXxyhe45WsEMMu
OOdXUn4cCP1JPdNJlbYcP9ErkxfcUMdSWOjHDzds0eKBU06YamBHYXVDX1eFKj2k
j5jF8bkC13jStNoN8MXVU1KztGGqpUkcEP70kFkGSEPS/iKzZBqovIpRQNnOq3zX
NffKN60uQQXycT6oylQfdCzlfi+s4qun+uDxzzL9k6idpBcaDXKMqxvhICobkWit
c+gOKL+ADSiW65XTkxInp9Br8DJdFUeO/zXxUt60iQKBgQDwhnMU98+eKRBOF0X7
7bwzQ9Mezwa2jVSYXnLf/Q6qm7LfaDKc4mkTG0r26CR7oXoQW89IUXn03MnGL24Q
KVtViwCakg5Gd7NfSsokfU9jMKu+RxWQqJxfoimqD5EqQ70u8roMpK0Y3D8BvjUL
gRM2+CyzLxdBfM6QzlqwFsyp2QKBgQDfRaghaldS553Aob4rk5jbMlNJJKD7jt1/
9Pni7sLwZF7+qo00ZcP/87EkEWNRpZTcKVOTtAXvp+5tbiJfqIraCH/EDh4P2TaG
WQ5vjohBD5ObMGmbfNW9kdv1Ot8S1TOovpsjZ7jLbnDxAzVykCZkhzwaMcEbdljP
YX3bD/DXnQKBgQDpSa6jPrxr7e43n9EsSeiJXJaPwkMDms7bPnhzEhJAneV/VKQK
kHtTodwy4PRJyVQIO9Qvk38TZXZ7OBOrr0E8FidOxKz94injGjo37Cas0U8yreWX
ukJ5a2K35INrF+qNd7XGf464lx6xhRgUAWxum4VXgiwvQ2ti/hLtyh9V+QKBgCmK
6medQ7Y3RlDrR1kQU2aljH2VhSaJRIlkaYJh7n+QDWTREwjmzns3OoR9f79XUcVN
IzHeUyRuWJyf22F1GLDM2AkAn3NPdSe2Nktnd86zOUGs1lmJ9rMZCpYsaAk3Bi+l
l3QU/ntLh1QwxqcUTzBxQSuWilmzwX6Eo0g5RRS5An9ooZwFJLAlNGMSzKgNTEN+
vBFj3bKqv/P1LKflCh9XwN22xnzemRzWEacAYU3pKuM98lF9r1/RqM7K8kmJHjZw
8LJJ6v/bGgmRqKyrCdARA4ViQYz7lVGmjRhCp0IQMkukZ5WfssUSL6r1IOHdMl6p
YztKkTYQgDi6EQw4LJSf
-----END PRIVATE KEY-----`
}

var activeChats = [ // this will be updated by the client to add new chats
]

var counters = {}; // stores user counters

var selectedChat = -1; // global is default

var socket;


async function connectToServer(server) {
    // close the current socket before opening new socket
    // only want to be connected to one server at a time
    if (socket != undefined) {
        socket.close();
    }

    socket = new WebSocket(`ws://${server}:8765`)

    socket.addEventListener("message", (event) => { // Listen for messages
        console.log("Message from server ", event.data);
        receivedMessage(event.data); // handle every message received
    });

    socket.addEventListener("open", (event) => {
        console.log("Connected to server");
        // update user's keys once connected to server
        updateKeys();
        sendData({"type": "hello", "public_key": selfKeys["public"]});
    })
}

// connectToServer('localhost') // initialise connection
